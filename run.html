<!doctype html>
<html>
<body style="margin:0;background:#000;">
<canvas id="c" style="width:100vw;height:100vh;display:block"></canvas>
<script>
const c=document.getElementById("c"),ctx=c.getContext("2d");
function resize(){c.width=c.clientWidth;c.height=c.clientHeight}
window.addEventListener("resize",resize);resize();

let ppm=200;
let xPos, yPos, vx, vy;
let g=9.81;
let wind=0;
let rpx=25;
let dragging=false;
reset();

function reset(){
  xPos=(c.width/ppm)/2; // center
  yPos=0.5;
  vx=0;
  vy=0;
}

function loop(t){
  // physics
  if(!dragging){
    // ---- drag added here ----
    vx += wind*0.016;
    vx += -0.4 * vx * 0.016;  // linear drag
    vy += g*0.016;
    vy += -0.4 * vy * 0.016;  // linear drag
    // -------------------------

    xPos+= vx*0.016;
    yPos+= vy*0.016;
  }

  // wall bounce
  let W=c.width/ppm,H=c.height/ppm;
  let r=rpx/ppm;
  if(xPos+r>=W){xPos=W-r;vx=-vx*0.9;}
  if(xPos-r<=0){xPos=r;vx=-vx*0.9;}
  if(yPos+r>=H){yPos=H-r;vy=-vy*0.9;}
  if(yPos-r<=0){yPos=r;vy=-vy*0.9;}

  // draw
  ctx.clearRect(0,0,c.width,c.height);
  ctx.beginPath();
  ctx.arc(xPos*ppm,yPos*ppm,rpx,0,Math.PI*2);
  ctx.fillStyle="#3cf";ctx.fill();

  requestAnimationFrame(loop);
}
requestAnimationFrame(loop);

c.onmousedown=e=>{
  const rect=c.getBoundingClientRect();
  const mx=e.clientX-rect.left,my=e.clientY-rect.top;
  if((mx-xPos*ppm)**2+(my-yPos*ppm)**2<=rpx*rpx) dragging=true;
}
c.onmousemove=e=>{
  if(!dragging)return;
  const rect=c.getBoundingClientRect();
  const mx=e.clientX-rect.left,my=e.clientY-rect.top;
  xPos=mx/ppm;
  yPos=my/ppm;
  vx=vy=0;
}
window.onmouseup=()=>dragging=false;
</script>
</body>
</html>